#!/bin/bash
SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )
BASE=$SCRIPT_DIR
RECEPTORID=try
# SEQ='NCTCPTNKMTVCSPDGPGGRCQCRALGSGMAVDCSTLTSKCLLLKARMSAPKNARTLVRPSEHALVDNDGLYDPDCDPEGRFKARQCNQTSVCWCVNSVGVRRTDKGDLSLRCDELVRTHHILIDLRHRPTAGAFNHSDLDAELRRLFRERYRLHPKFVAAVHYEQPTIQIELRQNTSQKAAGDVDIGDAAYYFERDIKGESLFQGRGGLDLRVRGEPLQVERTLIYYLDEIPPKF'
SEQ='KETAAAKFERQHMDSSTSAASSSNYCNQMMKSRNLTKDRCKPVNTFVHESLADVQAVCSQKNVACKNGQTNCYQSYSTMSITDCRETGSSKYPNCAYKTTQANKHIIVACEG'  #1ssc
# SEQ='MALKSLVLLSLLVLVLLLVRVQPSLGKETAAAKFERQHMDSSTSAASSSNYCNQMMKSRNLTKDRCKPVNTFVHESLADVQAVCSQKNVACKNGQTNCYQSYSTMSITDCRETGSSKYPNCAYKTTQANKHIIVACEGNPYVPVHFDASV'  #RNase1
# SEQ='GSQIPASEQETLVRPKPLLLKLLKSVGAQKDTYTMKEVLFYLGQYIMTKRLYDEKQQHIVYCSNDLLGDLFGVPSFSVKEHRKIYTMIYRNLVVVNQQESSDSGTSVSEN'  #1t4f
# SEQ='GSDLTVSLIPVSGLKAGKNAPSAKIAKLVVNSTTLKEFGVRGISNNVVDSTGTAWRVAGKNTGKEIGVGLSSDSLRRSDSTEKWNGVNWMTFNSNDTLDIVLTGPAQNVTADTYPITLDVVGYQP'   #2cnz
# SEQ='GSGEGPREPGAAGGAAGGSRDALSLEEILRLYNQPINEEQAWAVCYQCCGSLRAAARRRQPRHRVRSAAQIRVWRDGAVTLAPAADDAGEPPPVAGKLGYSQCMETEVIESLGIIIYKALDYGLKENEERELSPPLEQLIDHMANTVEADGSNDEGYEAAEEGLGDEDEKRKISAIRSYRDVMKLCAAHLPTESDAPNHYQAVCRALFAETMELHTFLTK'   #3r7g
# SEQ='GPRSVASSKLWMLEFSAFLEQQQDPDTYNKHLFVHIGQSSPSYSDPYLEAVDIRQIYDKFPEKKGGLKDLFERGPSNAFFLVKFWADLNTNIEDEGSSFYGVSSQYESPENMIITCSTKVCSFGKQVVEXVETEYARYENGHYSYRIHRSPLCEYMINFIHKLKHLPEKYMMNSVLENFTILQVVTNRDTQETLLCIAYVFEVSASEHGAQHHIYRLVKE'   #6seo
# SEQ='GPRSVASSKLWMLEFSAFLEQQQDPDTYNKHLFVHIGQSSPSYSDPYLEAVDIRQIYDKFPEKKGGLKDLFERGPSNAFFLVKFWADLNTNIEDEGSSFYGVSSQYESPENMIITCSTKVCSFGKQVVEKVETEYARYENGHYSYRIHRSPLCEYMINFIHKLKHLPEKYMMNSVLENFTILQVVTNRDTQETLLCIAYVFEVSASEHGAQHHIYRLVKE'   #6seo
# SEQ='EMGGITQTPYKVSISGTTVILTCPQYPGSEILWQHNDKNIGGDEDDKNIGSDEDHLSLKEFSELEQSGYYVCYPRGSKPEDANFYLYLRARVCENCMEMD'   #CD3
# POCKET='40,44,47,58,61,63,64,65,67,69,70,71,101,102,123,192,195,196,199,223,224,225,226,227,228,229,230,233,234,236' #1开始
POCKET='4,5,8,11,12,45,47,54,55,57,58,59,65,66,72,74,81,83,102,104,105,106,107,108,109,110,111,112'   #1ssc
# POCKET='4,5,8,11,12,45,47,54,55,57,58,59,65,66,72,74,81,83,102,104,105,106,107,108,109'   #1t4f
# POCKET='30,31,34,37,38,71,73,80,81,83,84,85,91,92,98,100,107,109,128,130,131,132,133,134,135,136,137,138'   #RNase1
# POCKET='1,2,4,5,6,7,8,9,11,12,13,14,15,23,24,33,36,37,41,55,66,80,82,87,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123'   # 2cnz
# POCKET='16,18,19,76,80,83,87,90,92,93,94,95,96,97,98,103,106,107,110,112,114'   #3r7g
# POCKET='40,41,42,43,46,47,74,76,162,185,187,189,190,191,196,197,198,200'   #6seo
# POCKET='23,24,25,26,27,28,40,41,42,43,44,45,46,47,48,52,53'     #CD3E_D
PATH_DIR=$BASE/$RECEPTORID/1ssc_12
PEPTIDELENGTH=12
DATADIR=$PATH_DIR/result
NITER=300
JUMPOUT=30

python3 $BASE/y_design.py \
		--receptor_seq=$SEQ \
		--receptor_if_residues=$POCKET \
		--peptide_length=$PEPTIDELENGTH \
		--output_dir=$DATADIR \
		--num_iterations=$NITER \
        --plDDT_only=True \
        --receptor_name=$RECEPTORID \
		--jumpout_num=$JUMPOUT \
